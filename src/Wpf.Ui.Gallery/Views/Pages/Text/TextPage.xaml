<Page
    x:Class="Wpf.Ui.Gallery.Views.Pages.Text.TextPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="clr-namespace:Wpf.Ui.Gallery.Controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Wpf.Ui.Gallery.Views.Pages.Text"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="clr-namespace:Wpf.Ui.Gallery.Models"
    xmlns:system="clr-namespace:System;assembly=System.Runtime"
    xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
    Title="TextPage"
    controls:PageControlDocumentation.Show="False"
    d:DesignHeight="450"
    d:DesignWidth="800"
    ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
    ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    Foreground="{DynamicResource TextFillColorPrimaryBrush}"
    ScrollViewer.CanContentScroll="False"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
            <RowDefinition x:Name="TerminalRow" Height="*" />
        </Grid.RowDefinitions>

        <ScrollViewer
            x:Name="ContentScrollViewer"
            Grid.Row="0"
            VerticalScrollBarVisibility="Auto">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Grid Grid.Row="0" Height="200" ClipToBounds="True">
                    <Grid>
                        <Rectangle VerticalAlignment="Bottom" Height="200" RadiusX="8" RadiusY="8" Panel.ZIndex="0">
                            <Rectangle.Fill>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                    <GradientStop Color="{DynamicResource SnowflakeGradientTop}" Offset="0" />
                                    <GradientStop Color="{DynamicResource SnowflakeGradientBottom}" Offset="1" />
                                </LinearGradientBrush>
                            </Rectangle.Fill>
                        </Rectangle>

                        <Grid Margin="10">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto" />
                                <ColumnDefinition Width="*" />
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0" Panel.ZIndex="1">
                                <ui:SymbolIcon x:Name="MainSymbolIcon" FontSize="100" />
                                <TextBlock
                                    x:Name="MainTitle"
                                    HorizontalAlignment="Center"
                                    VerticalAlignment="Center"
                                    FontSize="28"
                                    FontWeight="Black" />
                            </StackPanel>

                            <TextBlock
                                Grid.Column="1"
                                HorizontalAlignment="Center"
                                Margin="30"
                                Foreground="{DynamicResource TextControlPlaceholderForeground}"
                                FontSize="14"
                                Panel.ZIndex="-1"
                                TextWrapping="Wrap" FontFamily="Source Han Sans SC">
                                WPF UI provides the Fluent experience in your known and loved WPF framework. Intuitive design, themes, navigation and new immersive controls. All natively and effortlessly. Library changes the base elements like Page, ToggleButton or List, and also includes additional controls like Navigation, NumberBox, Dialog or Snackbar.
                                <LineBreak />
                                <LineBreak />
                                Support the development of WPF UI and other innovative projects by becoming a sponsor on GitHub! Your monthly or one-time contributions help us continue to deliver high-quality, open-source solutions that empower developers worldwide.
                            </TextBlock>
                        </Grid>

                        <Canvas x:Name="MainCanvas" Panel.ZIndex="2" />
                    </Grid>
                </Grid>

                <controls:GalleryNavigationPresenter
                    x:Name="CommandsPresenter"
                    Grid.Row="1"
                    Margin="0, 10"
                    ItemsSource="{Binding ViewModel.NavigationCards, Mode=OneWay}" />
            </Grid>
        </ScrollViewer>

        <GridSplitter
            Grid.Row="1"
            Height="4"
            HorizontalAlignment="Stretch"
            ResizeDirection="Rows"
            ResizeBehavior="PreviousAndNext"
            Background="Transparent" />

        <Border
            Grid.Row="2"
            CornerRadius="8"
            BorderThickness="1"
            BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}"
            Background="{DynamicResource CardBackgroundFillColorDefaultBrush}">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <Grid
                    x:Name="TerminalHeaderGrid"
                    Grid.Row="0"
                    Margin="8,4,8,0"
                    SizeChanged="TerminalHeaderGrid_OnSizeChanged">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>

                    <TextBlock
                        Grid.Column="0"
                        VerticalAlignment="Center"
                        Text="输出" />

                    <StackPanel
                        Grid.Column="1"
                        Orientation="Horizontal"
                        HorizontalAlignment="Right">
                        <ui:Button
                            Margin="0,0,8,0"
                            Icon="{ui:SymbolIcon CaretDown24}" />
                        <ui:Button
                            Icon="{ui:SymbolIcon Eraser24}" />
                    </StackPanel>
                </Grid>

                <!-- 卡片内部的分隔线 -->
                <Border
                    Grid.Row="1"
                    Margin="0,4,0,0"
                    BorderThickness="0,1,0,0"
                    BorderBrush="{DynamicResource ControlStrokeColorDefaultBrush}" />

                <RichTextBox
                    Grid.Row="2"
                    Margin="4,0,4,4"
                    IsReadOnly="True"
                    BorderThickness="0"
                    Background="Transparent"
                    ScrollViewer.VerticalScrollBarVisibility="Auto"
                    FontFamily="Cascadia Code SemiBold">
                    <FlowDocument FontFamily="{StaticResource ContentControlThemeFontFamily}">
                        <Paragraph>
                            <Run Text="{Binding ViewModel.TerminalOutput, Mode=OneWay}" />
                        </Paragraph>
                    </FlowDocument>
                </RichTextBox>
            </Grid>
        </Border>
    </Grid>
</Page>
